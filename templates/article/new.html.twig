{% extends 'base.html.twig' %}

{% block title %}New Article{% endblock %}

{% block body %}


  {%block PreLoader %}
     <div class="loader">
        <div class="loader-inner">
            <div class="circle"></div>
        </div>
     </div>
    {% endblock %}
    <h1 class="font-italic text-center">Create New Article</h1>


    <div class="row justify-content-center">
        <div class="col-md-6 col-lg-5">
            <div class="card">
                <div class="card-body">
                    {% for error in form.vars.errors %}
                        <div class="alert alert-danger">{{ error.message }}</div>
                    {% endfor %}

                    {{ form_start(form) }}
                        <div class="form-group">
                            {{ form_label(form.titreArticle, 'Title') }}
                            {{ form_widget(form.titreArticle, { 'attr': {'class': 'form-control'} }) }}
                        </div>
                        

                        {# <div class="form-group">
                            {{ form_label(form.dateArticle, 'Date') }}
                            {{ form_widget(form.dateArticle, { 'attr': {'class': 'form-control'} }) }}
                        </div> #}

                        <div class="form-group">
                            {{ form_label(form.contentArticle, 'Content') }}
                            {{ form_widget(form.contentArticle, { 'attr': {'class': 'form-control'} }) }}
                        </div>

                      

                        <div class="form-group">
                             {{ form_label(form.imageArticle, 'Upload Image', {'label_attr': {'class': 'custom-file-upload'}}) }}
                             {{ form_widget(form.imageArticle, { 'attr': {'class': 'form-control-file'} }) }}
                        </div>


                        <div class="form-group">
                            {{ form_label(form.categoryArticle, 'Category') }}
                            {{ form_widget(form.categoryArticle, { 'attr': {'class': 'form-control'} }) }}
                        </div>

                        <div class="form-group">

                      <button type="submit" class="btn btn-primary">Create</button>

                      <a href="{{ path('app_article_index') }}" class="btn btn-secondary">Back to list</a>
                     </div>

<button type="submit" class="btn btn-primary" id="share-on-facebook">Share on Facebook</button>

<script>
  $(document).ready(function() {
    $('#share-on-facebook').click(function(e) {
      e.preventDefault();

      // Get the article ID
      var idArticle = {{ article.idArticle }};

      // Make an AJAX call to the postArticleOnFacebook route
      $.ajax({
        url: '/article/' + idArticle + '/share-on-facebook',
        method: 'POST',
        success: function(response) {
          alert('Article shared on Facebook!');
        },
        error: function(xhr, status, error) {
          alert('Error sharing article on Facebook!');
        }
      });
    });
  });
</script>

                    {{ form_end(form) }}
                </div>
            </div>
        </div>
    </div>

    <a href="{{ path('app_article_index') }}">back to list</a>
{% endblock %}
